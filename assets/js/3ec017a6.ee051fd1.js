"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[40],{3990:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>x,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var t=s(1527),r=s(6225),l=s(2537),a=s(1332);const i={sidebar_position:8,description:"Data Distribution Service"},o="DDS",c={id:"dds",title:"DDS",description:"Data Distribution Service",source:"@site/docs/dds.md",sourceDirName:".",slug:"/dds",permalink:"/docs/dds",draft:!1,unlisted:!1,editUrl:"https://github.com/yazi-rs/yazi-rs.github.io/edit/main/docs/dds.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8,description:"Data Distribution Service"},sidebar:"docsSidebar",previous:{title:"CLI",permalink:"/docs/cli"},next:{title:"Tips",permalink:"/docs/tips"}},d={},h=[{value:"Concept",id:"concept",level:2},{value:"Usage",id:"usage",level:2},{value:"Command-line tool",id:"cli",level:3},{value:"Real-time <code>stdout</code> reporting",id:"stdout-reporting",level:3},{value:"Builtin kinds",id:"kinds",level:2},{value:"<code>cd</code> - change directory",id:"cd",level:3},{value:"<code>hover</code> - hover on a file",id:"hover",level:3},{value:"<code>rename</code> - rename a file",id:"rename",level:3},{value:"<code>bulk</code> - bulk rename files",id:"bulk",level:3},{value:"<code>yank</code> - yank files",id:"yank",level:3},{value:"<code>move</code> - move files",id:"move",level:3},{value:"<code>trash</code> - trash files",id:"trash",level:3},{value:"<code>delete</code> - delete files",id:"delete",level:3},{value:"<code>hi</code> - client handshake",id:"hi",level:3},{value:"<code>hey</code> - server handshake",id:"hey",level:3},{value:"<code>bye</code>",id:"bye",level:3},{value:"Builtin plugins",id:"plugins",level:2},{value:"<code>dds.lua</code>",id:"dds.lua",level:3},{value:"<code>session.lua</code>",id:"session.lua",level:3},{value:"<code>extract.lua</code>",id:"extract.lua",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"dds",children:"DDS"})}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsx)(n.p,{children:"This is a new feature that will be released in Yazi 0.2.5 and currently requires the latest code."}),(0,t.jsx)(n.p,{children:"Document is still being written..."})]}),"\n",(0,t.jsx)(n.p,{children:"DDS (Data Distribution Service) is designed to achieve communication and state synchronization between multiple Yazi instances, as well as state persistence. It is built on a client-server architecture but does not require running additional server processes."}),"\n",(0,t.jsx)(n.p,{children:"It deeply integrates with a publish-subscribe model based on the Lua API."}),"\n",(0,t.jsx)(n.h2,{id:"concept",children:"Concept"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Local: the current instance, that is, the current Yazi process."}),"\n",(0,t.jsx)(n.li,{children:"Remote: instances other than the current instance."}),"\n",(0,t.jsxs)(n.li,{children:["Static message: A message with a kind that starts with ",(0,t.jsx)(n.code,{children:"@"})," will be persistently stored and automatically restored when a new instance starts. To un-persist, send ",(0,t.jsx)(n.code,{children:"nil"})," to that kind."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.p,{children:"The DDS has three usage:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/plugins/utils#ps",children:"Plugin API"}),": Using Lua-based publish-subscribe model as the carrier."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#cli",children:"Command-line tool"}),": Using ",(0,t.jsx)(n.code,{children:"ya"})," command-line tool as the carrier."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.a,{href:"#stdout-reporting",children:["Real-time ",(0,t.jsx)(n.code,{children:"stdout"})," reporting"]}),": Using ",(0,t.jsx)(n.code,{children:"stdout"})," as the carrier."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"cli",children:"Command-line tool"}),"\n",(0,t.jsxs)(n.p,{children:["If you're in a Yazi subshell where the ",(0,t.jsx)(n.code,{children:"$YAZI_ID"})," environment variable is set, you can send a message to the current instance using ",(0,t.jsx)(n.code,{children:"ya pub"}),".\nIt requires a ",(0,t.jsx)(n.code,{children:"kind"})," argument, which is consistent with ",(0,t.jsx)(n.a,{href:"/docs/plugins/utils#ps.pub",children:(0,t.jsx)(n.code,{children:"ps.pub()"})}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'ya pub <kind> --str "string body"\nya pub <kind> --list "a" "b" "c"\nya pub <kind> --json \'{"key":"json body"}\'\n\n# For example, request the current instance to extract `a.zip` and `b.7z`\nya pub extract --list "/root/a.zip" "/root/b.7z"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["You can also send a message to a specified remote instance(s) using ",(0,t.jsx)(n.code,{children:"ya pub-to"}),", with the required ",(0,t.jsx)(n.code,{children:"receiver"})," and ",(0,t.jsx)(n.code,{children:"kind"})," arguments, consistent with ",(0,t.jsx)(n.a,{href:"/docs/plugins/utils#ps.pub_to",children:(0,t.jsx)(n.code,{children:"ps.pub_to()"})}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'ya pub-to <receiver> <kind> --str "string body"\nya pub-to <receiver> <kind> --list "a" "b" "c"\nya pub-to <receiver> <kind> --json \'{"key":"json body"}\'\n\n# If you\'re in a Yazi subshell,\n# you can obtain the ID of the current instance through `$YAZI_ID`.\nya pub-to "$YAZI_ID" dds-cd --str "/root"\n'})}),"\n",(0,t.jsx)(n.p,{children:"For greater convenience in integrating within the command-line environment, they support two body formats:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"String: a straightforward format, suitable for most scenarios, without the need for additional tools for encoding"}),"\n",(0,t.jsxs)(n.li,{children:["List: An array of strings, it is useful for carrying a file list to the message, through ",(0,t.jsx)(n.code,{children:"$@"})," in your shell"]}),"\n",(0,t.jsx)(n.li,{children:"JSON: for advanced needs, support for types and more complex data can be represented through the JSON format"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Note that ",(0,t.jsx)(n.code,{children:"ya"})," is a standalone CLI program introduced since Yazi 0.2.5, it might conflict with the shell wrapper you setup before, see ",(0,t.jsx)(n.a,{href:"https://github.com/sxyazi/yazi/issues/914",children:"Introduce a standalone CLI program"})," for details."]}),"\n",(0,t.jsxs)(n.h3,{id:"stdout-reporting",children:["Real-time ",(0,t.jsx)(n.code,{children:"stdout"})," reporting"]}),"\n",(0,t.jsxs)(n.p,{children:["You can specify the ",(0,t.jsx)(n.code,{children:"--local-events"})," and ",(0,t.jsx)(n.code,{children:"--remote-events"})," options when starting Yazi:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"# Local events\nyazi --local-events=kind1,kind2\n# Remote events\nyazi --remote-events=kind1,kind2\n# Both local and remote events\nyazi --local-events=kind1,kind2 --remote-events=kind1,kind2\n"})}),"\n",(0,t.jsxs)(n.p,{children:["When an event of the specified kind is received, it will be output to ",(0,t.jsx)(n.code,{children:"stdout"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'hover,0,200,{"tab":0,"url":"/root/Downloads"}\ncd,0,100,{"tab":0,"url":"/root/Downloads"}\n'})}),"\n",(0,t.jsx)(n.p,{children:"One payload per line, each payload contains the following fields separated by commas:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"kind"}),(0,t.jsx)(n.td,{children:"The kind of the message"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"receiver"}),(0,t.jsxs)(n.td,{children:["The remote instance ID that receives the message; if it's ",(0,t.jsx)(n.code,{children:"0"}),", broadcasts to all remote instances"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"sender"}),(0,t.jsx)(n.td,{children:"The sender of the message"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"body"}),(0,t.jsx)(n.td,{children:"The body of the message, which is a JSON string"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"This provides the ability to report Yazi's internal events in real-time, which is useful for external tool integration (such as Neovim), as they will be able to subscribe to the events triggered by the user behavior."}),"\n",(0,t.jsx)(n.h2,{id:"kinds",children:"Builtin kinds"}),"\n",(0,t.jsxs)(n.h3,{id:"cd",children:[(0,t.jsx)(n.code,{children:"cd"})," - change directory"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"{\n\ttab = 0\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'{\n\ttab = 0,\n\turl = Url("/root/Downloads")\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'cd,1711957542289249,1711957542289249,{"tab":0,"url":"/root/Downloads"}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'cd,0,100,{"tab":0,"url":"/root/Downloads"}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"hover",children:[(0,t.jsx)(n.code,{children:"hover"})," - hover on a file"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"{\n\ttab = 0\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'{\n\ttab = 0,\n\turl = Url("/root/foo.txt")\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'hover,1711957283332834,1711957283332834,{"tab":0,"url":"/root/foo.txt"}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'hover,0,200,{"tab":0,"url":"/root/foo.txt"}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"rename",children:[(0,t.jsx)(n.code,{children:"rename"})," - rename a file"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub()"})," / ",(0,t.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'{\n  tab = 0,\n  from = Url("/root/foo.txt"),\n  to = Url("/root/bar.txt"),\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'rename,1711957878076791,1711957878076791,{"tab":0,"from":"/root/foo.txt","to":"/root/bar.txt"}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'rename,0,1711957878076791,{"tab":0,"from":"/root/foo.txt","to":"/root/bar.txt"}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"bulk",children:[(0,t.jsx)(n.code,{children:"bulk"})," - bulk rename files"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub()"})," / ",(0,t.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'-- Since `Iterator` implementing `__pairs()`,\n-- you can iterate over all URL pairs using `pairs(body)`\nIterator {\n\t__len = function(self)\n\t\t-- Returns the number of files changed\n\tend,\n\t__pairs = function(self)\n\t\t-- Returns (Url("/path/from.txt"), Url("/path/to.txt"))\n\tend\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'bulk,1711957542289249,1711957542289249,{"changes":{"/path/from.txt":"/path/to.txt"}}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'bulk,0,1711957542289249,{"changes":{"/path/from.txt":"/path/to.txt"}}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"yank",children:[(0,t.jsx)(n.code,{children:"yank"})," - yank files"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"{}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"-- Since `Iterator` implementing `__index()`, you can access the yanked URLs by index,\n-- such as `body[1]`, or iterate over all URLs using `ipairs(body)`\nIterator {\n\tcut = false,\n\t__len = function(self)\n\t\t-- Returns the number of URLs yanked\n\tend,\n\t__index = function(self, idx)\n\t\t-- Returns the URL at the given index\n\tend\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'yank,1711960311454247,1711960311454247,{"cut":false,"urls":["/root/foo.txt","/root/bar.txt"]}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'yank,0,300,{"cut":false,"urls":["/root/foo.txt","/root/bar.txt"]}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"move",children:[(0,t.jsx)(n.code,{children:"move"})," - move files"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'{\n\titems = {\n\t\t{ from = Url("/root/foo.txt"), to = Url("/root/bar.txt") },\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'{\n\titems = {\n\t\t{ from = Url("/root/foo.txt"), to = Url("/root/bar.txt") },\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'move,1711957542289249,1711957542289249,{"items":[{"from":"/root/foo.txt","to":"/root/bar.txt"}]}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'move,0,1711957542289249,{"items":[{"from":"/root/foo.txt","to":"/root/bar.txt"}]}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"trash",children:[(0,t.jsx)(n.code,{children:"trash"})," - trash files"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'{\n\turls = {\n\t\tUrl("/root/foo.txt"),\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'{\n\turls = {\n\t\tUrl("/root/foo.txt"),\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'trash,1711957542289249,1711957542289249,{"urls":["/root/foo.txt"]}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'trash,0,1711957542289249,{"urls":["/root/foo.txt"]}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"delete",children:[(0,t.jsx)(n.code,{children:"delete"})," - delete files"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'{\n\turls = {\n\t\tUrl("/root/foo.txt"),\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'{\n\turls = {\n\t\tUrl("/root/foo.txt"),\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'delete,1711957542289249,1711957542289249,{"urls":["/root/foo.txt"]}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'delete,0,1711957542289249,{"urls":["/root/foo.txt"]}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"hi",children:[(0,t.jsx)(n.code,{children:"hi"})," - client handshake"]}),"\n",(0,t.jsx)(n.p,{children:"System reserves kind."}),"\n",(0,t.jsxs)(n.h3,{id:"hey",children:[(0,t.jsx)(n.code,{children:"hey"})," - server handshake"]}),"\n",(0,t.jsx)(n.p,{children:"System reserves kind."}),"\n",(0,t.jsx)(n.h3,{id:"bye",children:(0,t.jsx)(n.code,{children:"bye"})}),"\n",(0,t.jsx)(n.p,{children:"System reserves kind."}),"\n",(0,t.jsx)(n.h2,{id:"plugins",children:"Builtin plugins"}),"\n",(0,t.jsx)(n.h3,{id:"dds.lua",children:(0,t.jsx)(n.code,{children:"dds.lua"})}),"\n",(0,t.jsxs)(n.p,{children:["This plugin provides the ",(0,t.jsx)(n.code,{children:"dds-cd"})," event kind, which accepts a string URL and changes the CWD to that URL when it is received."]}),"\n",(0,t.jsx)(n.p,{children:"This is useful for synchronizing the CWD of the current Yazi instance when exiting from a subshell:"}),"\n",(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(a.Z,{value:"Zsh",label:"Zsh",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Change Yazi\'s CWD to PWD on subshell exit\nif [[ -n "$YAZI_ID" ]]; then\n\tfunction _yazi_cd() {\n\t\tya pub dds-cd --str "$PWD"\n\t}\n\tadd-zsh-hook zshexit _yazi_cd\nfi\n'})})}),(0,t.jsx)(a.Z,{value:"fish",label:"Fish",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Change Yazi\'s CWD to PWD on subshell exit\nif [ -n "$YAZI_ID" ]\n\ttrap \'ya pub dds-cd --str "$PWD"\' EXIT\nend\n'})})}),(0,t.jsx)(a.Z,{value:"nushell",label:"Nushell",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"# Please raise a PR if you have a nushell version\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Source code: ",(0,t.jsx)(n.a,{href:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/dds.lua",children:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/dds.lua"})]}),"\n",(0,t.jsx)(n.h3,{id:"session.lua",children:(0,t.jsx)(n.code,{children:"session.lua"})}),"\n",(0,t.jsx)(n.p,{children:"This plugin provides cross-instance yank ability, which means you can yank files in one instance, and then paste them in another instance."}),"\n",(0,t.jsxs)(n.p,{children:["To enable it, add these lines to your ",(0,t.jsx)(n.code,{children:"init.lua"}),", then restart ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.em,{children:"all"})})," Yazi instances to apply the changes:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'require("session"):setup {\n\tsync_yanked = true,\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Source code: ",(0,t.jsx)(n.a,{href:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/session.lua",children:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/session.lua"})]}),"\n",(0,t.jsx)(n.h3,{id:"extract.lua",children:(0,t.jsx)(n.code,{children:"extract.lua"})}),"\n",(0,t.jsxs)(n.p,{children:["This plugin provides an ",(0,t.jsx)(n.code,{children:"extract"})," event kind for archive extraction, which accepts an array of file URL. You can bind it as ",(0,t.jsx)(n.a,{href:"/docs/configuration/yazi#opener",children:"the opener"})," for archives:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'# ~/.config/yazi/yazi.toml\n[opener]\nextract = [\n\t{ run = \'ya pub extract --list "$@"\', desc = "Extract here", for = "unix" },\n\t{ run = \'ya pub extract --list %*\',   desc = "Extract here", for = "windows" },\n]\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Source code: ",(0,t.jsx)(n.a,{href:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/extract.lua",children:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/extract.lua"})]})]})}function x(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},1332:(e,n,s)=>{s.d(n,{Z:()=>a});s(959);var t=s(5341);const r={tabItem:"tabItem_x1w9"};var l=s(1527);function a(e){let{children:n,hidden:s,className:a}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,t.Z)(r.tabItem,a),hidden:s,children:n})}},2537:(e,n,s)=>{s.d(n,{Z:()=>k});var t=s(959),r=s(5341),l=s(4384),a=s(8903),i=s(3524),o=s(6824),c=s(5753),d=s(1384);function h(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:s}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:s,attributes:t,default:r}}=e;return{value:n,label:s,attributes:t,default:r}}))}(s);return function(e){const n=(0,c.lx)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function x(e){let{value:n,tabValues:s}=e;return s.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:s}=e;const r=(0,a.k6)(),l=function(e){let{queryString:n=!1,groupId:s}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:n,groupId:s});return[(0,o._X)(l),(0,t.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(r.location.search);n.set(l,e),r.replace({...r.location,search:n.toString()})}),[l,r])]}function j(e){const{defaultValue:n,queryString:s=!1,groupId:r}=e,l=u(e),[a,o]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!x({value:n,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=s.find((e=>e.default))??s[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:l}))),[c,h]=p({queryString:s,groupId:r}),[j,b]=function(e){let{groupId:n}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,l]=(0,d.Nk)(s);return[r,(0,t.useCallback)((e=>{s&&l.set(e)}),[s,l])]}({groupId:r}),m=(()=>{const e=c??j;return x({value:e,tabValues:l})?e:null})();(0,i.Z)((()=>{m&&o(m)}),[m]);return{selectedValue:a,selectValue:(0,t.useCallback)((e=>{if(!x({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),b(e)}),[h,b,l]),tabValues:l}}var b=s(4957);const m={tabList:"tabList_Z_Km",tabItem:"tabItem_CrVd"};var g=s(1527);function f(e){let{className:n,block:s,selectedValue:t,selectValue:a,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.o5)(),d=e=>{const n=e.currentTarget,s=o.indexOf(n),r=i[s].value;r!==t&&(c(n),a(r))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const s=o.indexOf(e.currentTarget)+1;n=o[s]??o[0];break}case"ArrowLeft":{const s=o.indexOf(e.currentTarget)-1;n=o[s]??o[o.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":s},n),children:i.map((e=>{let{value:n,label:s,attributes:l}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>o.push(e),onKeyDown:h,onClick:d,...l,className:(0,r.Z)("tabs__item",m.tabItem,l?.className,{"tabs__item--active":t===n}),children:s??n},n)}))})}function y(e){let{lazy:n,children:s,selectedValue:l}=e;const a=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===l));return e?(0,t.cloneElement)(e,{className:(0,r.Z)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==l})))})}function v(e){const n=j(e);return(0,g.jsxs)("div",{className:(0,r.Z)("tabs-container",m.tabList),children:[(0,g.jsx)(f,{...n,...e}),(0,g.jsx)(y,{...n,...e})]})}function k(e){const n=(0,b.Z)();return(0,g.jsx)(v,{...e,children:h(e.children)},String(n))}},6225:(e,n,s)=>{s.d(n,{Z:()=>i,a:()=>a});var t=s(959);const r={},l=t.createContext(r);function a(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);